(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1351:function(e,t,l){"use strict";l.r(t);var r=l(18),n=(l(14),l(8),l(26),l(53),l(95),l(40),l(45),l(66)),o=(l(41),l(13)),c=l.n(o),d={layout:"manage-activity",components:{UploadImages:l(325).a},data:function(){return{selected:[],coverUrl:null,files:[],field:{id:null,name:null},tab:null,tabItems:[{tab:"สินค้า",code:"product"},{tab:"คอลเล็กชั่น",code:"collection"},{tab:"Image Path",code:"imagePath"}],headersFurnitures:[{text:"รหัสสินค้า",align:"left",sortable:!1,value:"sku"},{text:"ชื่อสินค้า",align:"left",sortable:!1,value:"name"},{text:"ราคาขาย",align:"left",sortable:!1,value:"price"},{text:"ราคาขายสินค้ารวม",align:"left",sortable:!1,value:"price"},{text:"คงเหลือ",align:"left",sortable:!1,value:"price"},{text:"พร้อมขาย",align:"left",sortable:!1,value:"price"},{text:" ",value:"_id",width:"1%",sortable:!1}],furnitures:[],headersBundle:[{text:"รหัสสินค้า",value:"sku",width:"8%",sortable:!1},{text:"ชื่อสินค้า",value:"name",width:"10%"},{text:"ราคาซื้อ",value:"sellprice",width:"10%",sortable:!1},{text:"ราคาขาย",value:"purchaseprice",width:"10%",sortable:!1},{text:"คงเหลือ",value:"stock",width:"10%",sortable:!1},{text:"พร้อมขาย",value:"availablestock",width:"10%",sortable:!1},{text:" ",value:"_id",width:"1%",sortable:!1}],bundle:[],itemsStatus:[{value:!1,text:"Inactive"},{value:!0,text:"active"}],prefix:"เพิ่ม"}},methods:{syncData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.a.get("/api/rooms/"+e.$route.params.id).then((function(t){if(e.field=c.a.get(t,"data.data",c.a.get(t,"data",{})),e.furnitures=e.field.products,e.bundle=e.field.bundles,!e.empty(c.a.get(e.field,"images.0",null)))try{e.coverUrl="http://".concat(c.a.get(e.field,"images.0",null)),e.files=[{}]}catch(e){}}));case 1:case"end":return t.stop()}}),t)})))()},back:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var path;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:path=c.a.filter(e.$route.path.split("/")),path=c.a.filter(path,(function(e,t){return t!=path.length-1})),path=c.a.join(path,"/"),e.$router.push("/".concat(path));case 4:case"end":return t.stop()}}),t)})))()},remove:function(e,t){try{this[t]=c.a.filter(this[t],(function(t){return t._id!=e._id}))}catch(e){}},save:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var l,data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.field.products=e.furnitures,e.field.bundles=e.bundle,t.next=4,n.a.post("/api/rooms/"+e.$route.params.id,e.field);case 4:if(l=t.sent,data=c.a.get(l,"data",{}),e.empty(e.files)||!(e.files instanceof File)){t.next=12;break}return(r=new FormData).append("cover",e.files),r.append("id",data._id),t.next=12,n.a.post("/api/rooms/upload",r,{headers:{"Content-Type":"multipart/form-data"}});case 12:if(e.empty(c.a.get(e.field,"images.0",null))||!e.empty(e.files)){t.next=18;break}return console.log("delete image"),(new FormData).append("id",data._id),t.next=18,n.a.delete("/api/rooms/upload?id="+data._id);case 18:case"end":return t.stop()}}),t)})))()}},computed:{selectTab:function(){return c.a.get(this.tabItems,"".concat(this.tab,".code"),"")}},mounted:function(){["create","add","0"].includes(this.$route.params.id)?this.prefix="แก้ไข":this.syncData()},watch:{files:function(e){this.empty(e)&&(this.coverUrl=null)}}},v=l(2),f=l(29),m=l.n(f),x=l(303),_=l(185),h=l(310),k=l(122),w=l(1242),y=l(309),$=l(163),V=l(39),C=l(1244),I=l(65),T=l(1245),S=l(1253),R=l(714),j=l(99),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"rooms-form"},[l("Headtitle",{attrs:{title:e.prefix+"เฟอร์นิเจอร์"}}),e._v(" "),l("v-card",{staticClass:"mx-auto",attrs:{outlined:""}},[l("v-card-text",[l("v-row",[l("v-col",{attrs:{md:"12",xd:"12",cols:"12"}},[l("v-row",[l("v-col",{attrs:{md:"3",xd:"3",cols:"12"}},[l("v-list-item-subtitle",{staticClass:"grey--text text--darken-1 body-1 pr-2 mb-2"},[e._v(e._s(e.$t("รหัสหมวดหมู่")))]),e._v(" "),l("v-text-field",{attrs:{outlined:"",dense:"",placeholder:"รหัสหมวดหมู่"},model:{value:e.field.code,callback:function(t){e.$set(e.field,"code",t)},expression:"field.code"}})],1),e._v(" "),l("v-col",{attrs:{md:"6",xd:"6",cols:"12"}},[l("v-list-item-subtitle",{staticClass:"grey--text text--darken-1 body-1 pr-2 mb-2"},[e._v(e._s(e.$t("ชื่อหมวดหมู่")))]),e._v(" "),l("v-text-field",{attrs:{outlined:"",dense:"",placeholder:"ชื่อหมวดหมู่"},model:{value:e.field.name,callback:function(t){e.$set(e.field,"name",t)},expression:"field.name"}})],1),e._v(" "),l("v-col",{attrs:{md:"3",xd:"3",cols:"12"}},[l("v-list-item-subtitle",{staticClass:"grey--text text--darken-1 body-1 pr-2 mb-2"},[e._v(e._s(e.$t("สถานะ")))]),e._v(" "),l("v-select",{attrs:{items:e.itemsStatus,outlined:"",dense:"","item-text":"text","item-value":"value"},model:{value:e.field.status,callback:function(t){e.$set(e.field,"status",t)},expression:"field.status"}})],1)],1),e._v(" "),l("v-row",[l("v-col",{attrs:{md:"3",xd:"3",cols:"12"}},[l("v-list-item-subtitle",{staticClass:"grey--text text--darken-1 body-1 pr-2 mb-2"},[e._v(e._s(e.$t("ราคาขายสินค้ารวม")))]),e._v(" "),l("v-text-field",{attrs:{outlined:"",dense:"",placeholder:"ราคาขายสินค้ารวม"},model:{value:e.field.sellpricetotal,callback:function(t){e.$set(e.field,"sellpricetotal",t)},expression:"field.sellpricetotal"}})],1),e._v(" "),l("v-col",{attrs:{md:"3",xd:"3",cols:"12"}},[l("v-list-item-subtitle",{staticClass:"grey--text text--darken-1 body-1 pr-2 mb-2"},[e._v(e._s(e.$t("ราคาขาย")))]),e._v(" "),l("v-text-field",{attrs:{outlined:"",dense:"",placeholder:"ราคาขาย"},model:{value:e.field.sellprice,callback:function(t){e.$set(e.field,"sellprice",t)},expression:"field.sellprice"}})],1),e._v(" "),l("v-col",{attrs:{md:"3",xd:"3",cols:"12"}},[l("v-list-item-subtitle",{staticClass:"grey--text text--darken-1 body-1 pr-2 mb-2"},[e._v(e._s(e.$t("คงเหลือ")))]),e._v(" "),l("v-text-field",{attrs:{outlined:"",dense:"",placeholder:"คงเหลือ"},model:{value:e.field.stock,callback:function(t){e.$set(e.field,"stock",t)},expression:"field.stock"}})],1),e._v(" "),l("v-col",{attrs:{md:"3",xd:"3",cols:"12"}},[l("v-list-item-subtitle",{staticClass:"grey--text text--darken-1 body-1 pr-2 mb-2"},[e._v(e._s(e.$t("พร้อมขาย")))]),e._v(" "),l("v-text-field",{attrs:{outlined:"",dense:"",placeholder:"พร้อมขาย"},model:{value:e.field.availablestock,callback:function(t){e.$set(e.field,"availablestock",t)},expression:"field.availablestock"}})],1)],1)],1)],1),e._v(" "),l("v-row",[l("v-col",[l("v-tabs",{attrs:{color:"grey darken-3"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[l("v-tabs-slider",{attrs:{color:"grey darken-3"}}),e._v(" "),e._l(e.tabItems,(function(t){return l("v-tab",{key:t.tab},[e._v("\n                      "+e._s(t.tab)+"\n                  ")])}))],2),e._v(" "),l("v-card",{attrs:{outlined:""}},["product"==e.selectTab?l("v-card-text",[l("v-row",[l("v-col",{attrs:{md:"12",xd:"12",cols:"12"}},[l("v-model",{attrs:{url:"/api/products",label:"สินค้า",btn:!0,headers:[{value:"sku"},{value:"name"}],"search-field":["sku","name"],items:e.furnitures},scopedSlots:e._u([{key:"item.name",fn:function(t){var r=t.item;return[l("v-row",[l("v-col",{attrs:{cols:"auto"}},[l("v-avatar",{attrs:{tile:"",color:"blue"}},[e.empty(r.imagepath)?e._e():l("img",{attrs:{src:r.imagepath,alt:"John"}})])],1),e._v(" "),l("v-col",{staticClass:"v-treeview-node__label",attrs:{cols:"auto"}},[e._v("\n                                              "+e._s(r.name)+"\n                                          ")])],1)]}}],null,!1,4273656668),model:{value:e.furnitures,callback:function(t){e.furnitures=t},expression:"furnitures"}}),e._v(" "),l("v-divider"),e._v(" "),l("v-api-table-v2",{attrs:{"pagination-header":"",headers:e.headersFurnitures,items:e.furnitures,"hide-default-footer":""},scopedSlots:e._u([{key:"item._id",fn:function(t){var r=t.item;return[l("v-btn",{attrs:{icon:"",color:"green"},on:{click:function(t){return e.remove(r,"furnitures")}}},[l("v-icon",[e._v("mdi-close")])],1)]}}],null,!0)})],1)],1)],1):e._e(),e._v(" "),"collection"==e.selectTab?l("v-card-text",[l("v-row",[l("v-col",{attrs:{md:"12",xd:"12",cols:"12"}},[l("v-model",{attrs:{url:"/api/bundle",label:"คอลเล็กชั่น",btn:!0,headers:[{value:"sku"},{value:"name"}],"search-field":["sku","name"],items:e.bundle},scopedSlots:e._u([{key:"item.name",fn:function(t){var r=t.item;return[l("v-row",[l("v-col",{attrs:{cols:"auto"}},[l("v-avatar",{attrs:{tile:"",color:"blue"}})],1),e._v(" "),l("v-col",{staticClass:"v-treeview-node__label",attrs:{cols:"auto"}},[e._v("\n                                              "+e._s(r.name)+"\n                                          ")])],1)]}}],null,!1,2011171520),model:{value:e.bundle,callback:function(t){e.bundle=t},expression:"bundle"}}),e._v(" "),l("v-divider"),e._v(" "),l("v-api-table-v2",{attrs:{"pagination-header":"",headers:e.headersBundle,items:e.bundle,"hide-default-footer":""},scopedSlots:e._u([{key:"item._id",fn:function(t){var r=t.item;return[l("v-btn",{attrs:{icon:"",color:"green"},on:{click:function(t){return e.remove(r,"bundle")}}},[l("v-icon",[e._v("mdi-close")])],1)]}}],null,!0)})],1)],1)],1):e._e(),e._v(" "),"imagePath"==e.selectTab?l("v-card-text",[l("v-row",[l("v-col",{attrs:{md:"12",xd:"12",cols:"12"}},[l("VApiImageInput",{ref:"cover",attrs:{label:e.$t("ภาพหน้าปกสื่อวิดีโอ"),messages:e.$t("รองรับไฟล์นามสกุล jpg ขนาดไม่เกิน 5 MB ขนาดรูปภาพที่แนะนำ 1920 x 1080 px"),src:e.coverUrl},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1)],1)],1):e._e()],1)],1)],1),e._v(" "),l("v-row",[l("v-col",[l("v-btn",{staticClass:"mr-4 while--text",attrs:{color:"#4d6785"},on:{click:function(t){return e.save()}}},[e._v(e._s(e.$t("บันทึก")))]),e._v(" "),l("v-btn",{staticClass:"mr-4",attrs:{color:"#d1d3d6"},on:{click:function(t){return e.back()}}},[e._v(e._s(e.$t("ย้อนกลับ")))])],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;m()(component,{Headtitle:l(729).default,VModel:l(740).default,VApiTableV2:l(730).default,VApiImageInput:l(735).default}),m()(component,{VAvatar:x.a,VBtn:_.a,VCard:h.a,VCardText:k.c,VCol:w.a,VDivider:y.a,VIcon:$.a,VListItemSubtitle:V.b,VRow:C.a,VSelect:I.a,VTab:T.a,VTabs:S.a,VTabsSlider:R.a,VTextField:j.a})}}]);